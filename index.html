<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Kumbh Mela 2027 â€” Nashik Temple Rover Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Real-time monitoring dashboard for the autonomous Nirmalya collection rover at Kumbh Mela 2027 in Nashik, Maharashtra. Powered by GeoPandas route optimization." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="app-shell">
    <!-- Top Navbar -->
    <header class="top-nav">
      <div class="nav-left">
        <div class="brand-mark">ðŸ•‰</div>
        <div class="nav-titles">
          <h1>Kumbh Mela 2027 â€” Rover Monitoring</h1>
          <p>Real-time tracking of autonomous Nirmalya collection rover Â· Nashik</p>
        </div>
      </div>
      <div class="nav-right">
        <div class="status-pill" id="system-status-pill">
          <span class="status-dot online"></span>
          <span id="system-status-text">Online Â· Idle</span>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="layout">
      <!-- Left dashboard panel -->
      <aside class="sidebar">
        <!-- Rover Stats Card -->
        <section class="card">
          <h2>Rover Telemetry</h2>
          <div class="stats-grid">
            <div class="stat">
              <span class="label">Status</span>
              <span class="value" id="rover-status-text">Idle</span>
            </div>
            <div class="stat">
              <span class="label">Speed</span>
              <span class="value" id="rover-speed-text">0 km/h</span>
            </div>
            <div class="stat">
              <span class="label">Distance Covered</span>
              <span class="value" id="rover-distance-text">0.00 km</span>
            </div>
            <div class="stat">
              <span class="label">Route Progress</span>
              <span class="value" id="rover-progress-text">0%</span>
            </div>
            <div class="stat">
              <span class="label">Estimated Time Left</span>
              <span class="value" id="rover-eta-text">â€“</span>
            </div>
            <div class="stat">
              <span class="label">Current Coordinates</span>
              <span class="value small" id="rover-coords-text">â€“, â€“</span>
            </div>
          </div>

          <div class="speed-selector-row">
            <label for="rover-speed-select" class="speed-label">Demo speed</label>
            <select id="rover-speed-select" class="speed-select">
              <option value="10">10 km/h</option>
              <option value="12" selected>12 km/h</option>
              <option value="15">15 km/h</option>
              <option value="18">18 km/h</option>
            </select>
          </div>
          <div class="controls-row">
            <button id="btn-start" class="btn primary">Start</button>
            <button id="btn-pause" class="btn subtle">Pause</button>
            <button id="btn-reset" class="btn subtle">Reset</button>
          </div>
        </section>

        <!-- Raspberry Pi Live Stream -->
        <section class="card">
          <h2>Rover Camera Stream</h2>
          <p class="card-subtitle">Live feed from Raspberry Pi Â· raspberrypi.local:8766</p>
          <div class="stream-wrap">
            <div id="stream-overlay" class="stream-overlay" aria-live="polite">
              <span class="stream-overlay-icon">ðŸ“¡</span>
              <p class="stream-overlay-title">Connecting to streamâ€¦</p>
              <p id="stream-overlay-message" class="stream-overlay-message"></p>
            </div>
            <iframe
              id="stream-iframe"
              src="http://raspberrypi.local:8766"
              title="Raspberry Pi waste detection stream"
              class="stream-iframe"
              allow="autoplay; fullscreen"
              allowfullscreen
            ></iframe>
          </div>
        </section>

        <!-- Waste-to-Product Pipeline Card -->
        <section class="card">
          <h2>Waste-to-Product Pipeline</h2>
          <p class="card-subtitle">Nirmalya conversion projects</p>
          <div class="pipeline-grid">
            <div class="pipeline-item">
              <span class="pipeline-icon">ðŸŒ±</span>
              <span class="pipeline-label">Fertilizer</span>
              <span class="pipeline-value">100â€“200 kg â†’ 40 kg compost Â· 30 days</span>
            </div>
            <div class="pipeline-item">
              <span class="pipeline-icon">ðŸŒ¿</span>
              <span class="pipeline-label">Room Freshener</span>
              <span class="pipeline-value">3 kg flowers â†’ 10â€“12 L</span>
            </div>
            <div class="pipeline-item">
              <span class="pipeline-icon">ðŸ”¥</span>
              <span class="pipeline-label">Solid Fuel</span>
              <span class="pipeline-value">Briquettes (cow dung + jaggery binder)</span>
            </div>
            <div class="pipeline-item">
              <span class="pipeline-icon">ðŸŽ¨</span>
              <span class="pipeline-label">Natural Dyes</span>
              <span class="pipeline-value">Soxhlet extraction Â· concentrated extract</span>
            </div>
          </div>
        </section>

        <!-- Estimated Collection Card -->
        <section class="card">
          <h2>Estimated Nirmalya Yield</h2>
          <p class="card-subtitle">Based on rover route progress Â· 26 temples</p>
          <div class="stats-grid">
            <div class="stat">
              <span class="label">Temples Passed</span>
              <span class="value" id="temples-passed-text">0</span>
            </div>
            <div class="stat">
              <span class="label">Est. Waste (kg)</span>
              <span class="value" id="est-waste-text">0</span>
            </div>
            <div class="stat">
              <span class="label">Est. Compost (kg)</span>
              <span class="value" id="est-compost-text">0</span>
            </div>
            <div class="stat">
              <span class="label">Est. Freshener (L)</span>
              <span class="value" id="est-freshener-text">0</span>
            </div>
          </div>
        </section>

        <!-- Route Optimization Card -->
        <section class="card">
          <h2>Route Optimization</h2>
          <p class="card-subtitle">Shortest path algorithms (TSP) for faster temple visits</p>
          <div class="algo-grid">
            <div class="algo-item">
              <span class="algo-name">Nearest Neighbor</span>
              <span class="algo-value" id="nn-dist">â€“</span>
            </div>
            <div class="algo-item">
              <span class="algo-name">2-Opt Improved</span>
              <span class="algo-value" id="twoopt-dist">â€“</span>
            </div>
          </div>
          <p class="algo-note">
            Green dashed line shows 2-opt optimized visit order.
          </p>
        </section>

        <!-- Layer Toggles Card -->
        <section class="card">
          <h2>Map Layers</h2>
          <p class="card-subtitle">Toggle visibility of location categories</p>
          <div class="layer-toggles">
            <label class="toggle-row">
              <input type="checkbox" id="toggle-temples" checked />
              <span class="toggle-dot temple"></span>
              Temples & Ghats <span class="toggle-count">(26)</span>
            </label>
            <label class="toggle-row">
              <input type="checkbox" id="toggle-transport" checked />
              <span class="toggle-dot transport"></span>
              Transport Hubs <span class="toggle-count">(6)</span>
            </label>
            <label class="toggle-row">
              <input type="checkbox" id="toggle-roads" checked />
              <span class="toggle-dot road"></span>
              Roads & Junctions <span class="toggle-count">(26)</span>
            </label>
            <label class="toggle-row">
              <input type="checkbox" id="toggle-route" checked />
              <span class="toggle-line route"></span>
              Rover Route <span class="toggle-count">(18.60 km)</span>
            </label>
            <label class="toggle-row">
              <input type="checkbox" id="toggle-processing" checked />
              <span class="toggle-dot processing"></span>
              Processing Facilities <span class="toggle-count">(2)</span>
            </label>
            <label class="toggle-row">
              <input type="checkbox" id="toggle-optimized" />
              <span class="toggle-line optimized"></span>
              2-Opt Route <span class="toggle-count" id="optimized-dist">(â€“ km)</span>
            </label>
          </div>
        </section>

        <!-- Impact Card -->
        <section class="card">
          <h2>Project Impact</h2>
          <p class="card-subtitle">Sustainable Nirmalya Management goals</p>
          <ul class="impact-list">
            <li>Reduction in unmanaged temple waste</li>
            <li>Efficient logistics & collection planning</li>
            <li>Waste-to-wealth: fertilizers, incense, compost, bio-enzymes</li>
            <li>Circular economy & sustainable environment</li>
          </ul>
        </section>

        <!-- Temple List Card -->
        <section class="card">
          <h2>Religious Places</h2>
          <p class="card-subtitle">
            26 temples and ghats extracted from Kumbh Mela KMZ data.
            Route follows actual road paths from Google Maps directions.
          </p>
          <div class="temple-list" id="temple-list"></div>
        </section>

        <!-- Data Source Card -->
        <section class="card">
          <h2>Data Source</h2>
          <p class="card-subtitle">
            Locations from <strong>Kumbh mela.kmz.zip</strong> via GeoPandas.
            Route optimization: nearest-neighbor & 2-opt (TSP).
          </p>
          <div class="code-snippet">
            <pre>
# 58 unique locations from KMZ
# 26 Religious Places
#  6 Transportation Hubs
# 26 Roads & Junctions
# Route: 456 road waypoints, 18.60 km</pre>
          </div>
        </section>
      </aside>

      <!-- Right map panel -->
      <main class="map-panel">
        <div class="map-card">
          <div class="map-header">
            <div>
              <h2>Kumbh Mela 2027 Location Map</h2>
              <p>
                58 locations from KMZ Â· Nashik, Maharashtra Â· Optimized rover route
              </p>
            </div>
            <div class="legend">
              <div class="legend-item">
                <span class="legend-dot temple"></span>Temple
              </div>
              <div class="legend-item">
                <span class="legend-dot transport"></span>Transport
              </div>
              <div class="legend-item">
                <span class="legend-dot road"></span>Road/Junction
              </div>
              <div class="legend-item">
                <span class="legend-line route"></span>Rover route
              </div>
              <div class="legend-item">
                <span class="legend-dot rover"></span>Rover
              </div>
              <div class="legend-item">
                <span class="legend-dot processing"></span>Processing
              </div>
            </div>
          </div>
          <div class="map-body">
            <div id="map"></div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="main.js"></script>
</body>

</html>